# üöÄ DevCommunity - C·ªông ƒê·ªìng L·∫≠p Tr√¨nh Vi√™n

DevCommunity l√† m·ªôt n·ªÅn t·∫£ng web hi·ªán ƒë·∫°i ƒë∆∞·ª£c x√¢y d·ª±ng tr√™n ASP.NET Core, k·∫øt h·ª£p c√°c t√≠nh nƒÉng c·ªßa GitHub v√† Stack Overflow ƒë·ªÉ t·∫°o m·ªôt m√¥i tr∆∞·ªùng h·ªçc t·∫≠p v√† chia s·∫ª ki·∫øn th·ª©c l·∫≠p tr√¨nh hi·ªáu qu·∫£.

![DevCommunity Screenshot](https://github.com/user-attachments/assets/4d958968-526b-446a-9379-4e0231cd9ee8)

## üìÇ C·∫•u Tr√∫c D·ª± √Ån

### üìÅ M√¥ H√¨nh/Models
Ch·ª©a c√°c class ƒë·∫°i di·ªán cho c·∫•u tr√∫c d·ªØ li·ªáu:
- `User.cs` - Qu·∫£n l√Ω th√¥ng tin ng∆∞·ªùi d√πng v√† x√°c th·ª±c
- `Question.cs`, `Answer.cs`, `Comment.cs` - M√¥ h√¨nh cho h·ªá th·ªëng Q&A
- `Repository.cs`, `RepositoryFile.cs` - Qu·∫£n l√Ω kho m√£ ngu·ªìn
- `Tag.cs`, `Badge.cs` - H·ªá th·ªëng tag v√† huy hi·ªáu th√†nh t·ª±u
- `Vote.cs`, `ReputationHistory.cs` - H·ªá th·ªëng b√¨nh ch·ªçn v√† ƒëi·ªÉm uy t√≠n
- `DevCommunityContext.cs` - DbContext Entity Framework qu·∫£n l√Ω k·∫øt n·ªëi DB

### üéÆ Controllers
X·ª≠ l√Ω c√°c request HTTP v√† ƒëi·ªÅu h∆∞·ªõng:
- `AccountController.cs` - ƒêƒÉng k√Ω, ƒëƒÉng nh·∫≠p, qu·∫£n l√Ω t√†i kho·∫£n
- `QuestionsController.cs` - CRUD cho c√¢u h·ªèi v√† t√¨m ki·∫øm
- `RepositoryController.cs` - Qu·∫£n l√Ω repo m√£ ngu·ªìn
- `VoteController.cs` - X·ª≠ l√Ω upvote/downvote
- `BadgeController.cs` - Qu·∫£n l√Ω v√† c·∫•p huy hi·ªáu th√†nh t·ª±u
- `TagsController.cs` - Qu·∫£n l√Ω tag v√† ph√¢n lo·∫°i n·ªôi dung

### üõ†Ô∏è Services
Ch·ª©a logic nghi·ªáp v·ª• c·ªßa ·ª©ng d·ª•ng:
- `UserService.cs` - X·ª≠ l√Ω ng∆∞·ªùi d√πng v√† x√°c th·ª±c
- `QuestionService.cs` - T√¨m ki·∫øm, s·∫Øp x·∫øp v√† x·ª≠ l√Ω c√¢u h·ªèi
- `RepositoryService.cs` - Qu·∫£n l√Ω m√£ ngu·ªìn v√† t√≠ch h·ª£p Git
- `BadgeService.cs` - C∆° ch·∫ø c·∫•p huy hi·ªáu th√†nh t·ª±u
- `MarkdownService.cs` - Render Markdown v√† x·ª≠ l√Ω ƒë·ªãnh d·∫°ng
- `ReputationService.cs` - T√≠nh ƒëi·ªÉm uy t√≠n v√† x·∫øp h·∫°ng
- `NotificationService.cs` - Qu·∫£n l√Ω th√¥ng b√°o

### üì° Hubs
SignalR hubs cho t√≠nh nƒÉng real-time:
- `ChatHub.cs` - Tin nh·∫Øn tr·ª±c ti·∫øp
- `NotificationHub.cs` - Th√¥ng b√°o th·ªùi gian th·ª±c
- `QuestionHub.cs` - C·∫≠p nh·∫≠t tr·∫°ng th√°i c√¢u h·ªèi
- `BadgeHub.cs` - Th√¥ng b√°o huy hi·ªáu m·ªõi
- `PresenceHub.cs` - Hi·ªÉn th·ªã tr·∫°ng th√°i online
- `ViewCountHub.cs` - ƒê·∫øm l∆∞·ª£t xem th·ªùi gian th·ª±c

### üåê Views
Giao di·ªán ng∆∞·ªùi d√πng s·ª≠ d·ª•ng Razor:
- `Account/` - Giao di·ªán ƒëƒÉng nh·∫≠p, ƒëƒÉng k√Ω
- `Questions/` - Hi·ªÉn th·ªã v√† t∆∞∆°ng t√°c v·ªõi c√¢u h·ªèi
- `Repository/` - Qu·∫£n l√Ω v√† hi·ªÉn th·ªã m√£ ngu·ªìn
- `Shared/` - Layout v√† partial views d√πng chung

### ‚öôÔ∏è GitIntegration
T√≠ch h·ª£p v·ªõi Gitea ƒë·ªÉ qu·∫£n l√Ω m√£ ngu·ªìn:
- `GiteaService.cs` - T∆∞∆°ng t√°c v·ªõi Gitea API
- `GiteaRepositoryService.cs` - Qu·∫£n l√Ω repo
- `GiteaUserSyncService.cs` - ƒê·ªìng b·ªô ng∆∞·ªùi d√πng v·ªõi Gitea

### üß© C√°c Th√†nh Ph·∫ßn Kh√°c
- `Middleware/` - Custom middleware cho x·ª≠ l√Ω request
- `Extensions/` - Extension methods ƒë·ªÉ c·∫•u h√¨nh services
- `Repositories/` - C√°c repository pattern ƒë·ªÉ truy c·∫≠p d·ªØ li·ªáu
- `ViewComponents/` - Razor view components t√°i s·ª≠ d·ª•ng
- `ViewModels/` - DTOs v√† view models
- `Filters/` - Action filters v√† attribute custom
- `Utils/` - C√°c ti·ªán √≠ch v√† helper classes

## ‚ú® Ch·ª©c NƒÉng ƒê√£ Tri·ªÉn Khai

### üîê H·ªá Th·ªëng X√°c Th·ª±c
- **ƒêƒÉng k√Ω v√† ƒëƒÉng nh·∫≠p**: S·ª≠ d·ª•ng ASP.NET Identity v·ªõi c√°c t√πy ch·ªânh cho DevCommunity
- **OAuth**: ƒêƒÉng nh·∫≠p qua Google v√† GitHub
- **Ph√¢n quy·ªÅn**: H·ªá th·ªëng Role-based access control (Admin, Moderator, User)

**C√°ch tri·ªÉn khai**: S·ª≠ d·ª•ng `UserService` v√† `AccountController` ƒë·ªÉ x·ª≠ l√Ω ƒëƒÉng k√Ω, ƒëƒÉng nh·∫≠p, v√† qu·∫£n l√Ω phi√™n. M·∫≠t kh·∫©u ƒë∆∞·ª£c m√£ h√≥a b·∫±ng `BCrypt` th√¥ng qua `PasswordHashService`.

```csharp
// V√≠ d·ª• h√†m ƒëƒÉng nh·∫≠p trong AccountController
public async Task<IActionResult> Login(LoginViewModel model)
{
    var user = await _userService.AuthenticateUser(model.Email, model.Password);
    if (user != null)
    {
        await _signInManager.SignInAsync(user, model.RememberMe);
        return RedirectToAction("Index", "Home");
    }
    ModelState.AddModelError("", "Th√¥ng tin ƒëƒÉng nh·∫≠p kh√¥ng ch√≠nh x√°c");
    return View(model);
}
```

### ‚ùì H·ªá Th·ªëng Q&A
- **ƒêƒÉng c√¢u h·ªèi**: H·ªó tr·ª£ Markdown, ƒë√≠nh k√®m t·∫≠p tin
- **Tr·∫£ l·ªùi v√† b√¨nh lu·∫≠n**: Th·∫£o lu·∫≠n ƒëa c·∫•p
- **Upvote/Downvote**: ƒê√°nh gi√° ch·∫•t l∆∞·ª£ng n·ªôi dung
- **Tags**: Ph√¢n lo·∫°i c√¢u h·ªèi theo ch·ªß ƒë·ªÅ

**C√°ch tri·ªÉn khai**: `QuestionService` x·ª≠ l√Ω t√¨m ki·∫øm v√† CRUD cho c√¢u h·ªèi, k·∫øt h·ª£p v·ªõi `MarkdownService` ƒë·ªÉ render n·ªôi dung v√† `VoteController` ƒë·ªÉ qu·∫£n l√Ω b√¨nh ch·ªçn.

```csharp
// V√≠ d·ª• h√†m t√¨m ki·∫øm c√¢u h·ªèi trong QuestionService
public async Task<QuestionSearchResult> SearchQuestions(
    string query, 
    int page, 
    string sortBy, 
    List<string> tags,
    int? userId)
{
    var questions = _context.Questions
        .Include(q => q.User)
        .Include(q => q.QuestionTags)
            .ThenInclude(qt => qt.Tag)
        .AsQueryable();
        
    // L·ªçc theo t·ª´ kh√≥a t√¨m ki·∫øm
    if (!string.IsNullOrEmpty(query))
    {
        questions = questions.Where(q => 
            q.Title.Contains(query) || 
            q.Content.Contains(query));
    }
    
    // L·ªçc theo tags
    if (tags != null && tags.Count > 0)
    {
        questions = questions.Where(q => 
            q.QuestionTags.Any(t => tags.Contains(t.Tag.Name)));
    }
    
    // S·∫Øp x·∫øp theo ti√™u ch√≠
    questions = sortBy switch
    {
        "newest" => questions.OrderByDescending(q => q.CreatedDate),
        "votes" => questions.OrderByDescending(q => q.VoteCount),
        "activity" => questions.OrderByDescending(q => q.LastActivityDate),
        _ => questions.OrderByDescending(q => q.CreatedDate)
    };
    
    // Ph√¢n trang
    var totalQuestions = await questions.CountAsync();
    var pageSize = 20;
    var pagedQuestions = await questions
        .Skip((page - 1) * pageSize)
        .Take(pageSize)
        .ToListAsync();
        
    return new QuestionSearchResult
    {
        Questions = pagedQuestions,
        TotalCount = totalQuestions,
        CurrentPage = page,
        PageSize = pageSize
    };
}
```

### üì¶ Qu·∫£n L√Ω M√£ Ngu·ªìn v·ªõi Gitea
- **Repository Management**: T·∫°o v√† qu·∫£n l√Ω repo
- **Code Viewing**: Xem m√£ ngu·ªìn v·ªõi syntax highlighting
- **Integration v·ªõi Git**: ƒê·ªìng b·ªô h√≥a v·ªõi Gitea

**C√°ch tri·ªÉn khai**: `GiteaService` v√† `RepositoryService` l√†m vi·ªác c√πng nhau ƒë·ªÉ ƒë·ªìng b·ªô d·ªØ li·ªáu gi·ªØa ·ª©ng d·ª•ng v√† Gitea, cung c·∫•p tr·∫£i nghi·ªám Git ho√†n ch·ªânh.

```csharp
// V√≠ d·ª• c√°ch l·∫•y danh s√°ch repository t·ª´ GiteaService
public async Task<List<RepositoryDto>> GetUserRepositories(string username)
{
    var apiUrl = $"{_giteaOptions.ApiUrl}/users/{username}/repos";
    var request = new HttpRequestMessage(HttpMethod.Get, apiUrl);
    request.Headers.Add("Authorization", $"token {_giteaOptions.ApiToken}");
    
    var response = await _httpClient.SendAsync(request);
    if (response.IsSuccessStatusCode)
    {
        var content = await response.Content.ReadAsStringAsync();
        var repositories = JsonConvert.DeserializeObject<List<RepositoryDto>>(content);
        return repositories;
    }
    
    _logger.LogError($"Failed to get repositories for user {username}");
    return new List<RepositoryDto>();
}
```

### üèÜ H·ªá Th·ªëng Huy Hi·ªáu v√† Danh Hi·ªáu
- **Achievement Badges**: Huy hi·ªáu th∆∞·ªüng cho c√°c th√†nh t√≠ch
- **Reputation Points**: T√≠nh ƒëi·ªÉm uy t√≠n d·ª±a tr√™n ƒë√≥ng g√≥p
- **User Levels**: C·∫•p ƒë·ªô ng∆∞·ªùi d√πng d·ª±a tr√™n ho·∫°t ƒë·ªông

**C√°ch tri·ªÉn khai**: `BadgeService` qu·∫£n l√Ω vi·ªác c·∫•p huy hi·ªáu d·ª±a tr√™n c√°c s·ª± ki·ªán trong h·ªá th·ªëng, k·∫øt h·ª£p v·ªõi `ReputationService` ƒë·ªÉ t√≠nh ƒëi·ªÉm uy t√≠n.

```csharp
// V√≠ d·ª• h√†m ki·ªÉm tra v√† c·∫•p huy hi·ªáu cho ng∆∞·ªùi d√πng
public async Task CheckAndAwardBadges(int userId)
{
    var user = await _context.Users
        .Include(u => u.BadgeAssignments)
        .FirstOrDefaultAsync(u => u.UserId == userId);
        
    if (user == null)
        return;
        
    var alreadyAwardedBadgeIds = user.BadgeAssignments.Select(ba => ba.BadgeId).ToList();
    
    // Ki·ªÉm tra huy hi·ªáu First Question
    if (!alreadyAwardedBadgeIds.Contains((int)BadgeType.FirstQuestion))
    {
        var questionCount = await _context.Questions.CountAsync(q => q.UserId == userId);
        if (questionCount >= 1)
        {
            await AwardBadge(userId, (int)BadgeType.FirstQuestion);
        }
    }
    
    // Ki·ªÉm tra huy hi·ªáu Popular Answer
    if (!alreadyAwardedBadgeIds.Contains((int)BadgeType.PopularAnswer))
    {
        var hasPopularAnswer = await _context.Answers
            .AnyAsync(a => a.UserId == userId && a.VoteCount >= 10);
            
        if (hasPopularAnswer)
        {
            await AwardBadge(userId, (int)BadgeType.PopularAnswer);
        }
    }
    
    // Th√™m c√°c ki·ªÉm tra huy hi·ªáu kh√°c...
}
```

### üì± T√≠nh NƒÉng Real-time v·ªõi SignalR
- **Instant Notifications**: Th√¥ng b√°o th·ªùi gian th·ª±c
- **Live Chat**: Tin nh·∫Øn tr·ª±c ti·∫øp gi·ªØa ng∆∞·ªùi d√πng
- **Live Updates**: C·∫≠p nh·∫≠t tr·∫°ng th√°i c√¢u h·ªèi, b√¨nh lu·∫≠n kh√¥ng c·∫ßn refresh

**C√°ch tri·ªÉn khai**: C√°c hub SignalR nh∆∞ `NotificationHub`, `ChatHub`, v√† `QuestionHub` cung c·∫•p k·∫øt n·ªëi WebSocket cho tr·∫£i nghi·ªám real-time.

```csharp
// V√≠ d·ª• NotificationHub ƒë·ªÉ g·ª≠i th√¥ng b√°o real-time
public class NotificationHub : Hub
{
    private readonly INotificationService _notificationService;
    
    public NotificationHub(INotificationService notificationService)
    {
        _notificationService = notificationService;
    }
    
    public async Task SendNotification(int userId, string message, string type)
    {
        var notification = await _notificationService.CreateNotification(userId, message, type);
        await Clients.User(userId.ToString()).SendAsync("ReceiveNotification", notification);
    }
    
    public async Task MarkAsRead(int notificationId)
    {
        await _notificationService.MarkAsRead(notificationId);
        await Clients.Caller.SendAsync("NotificationMarkedAsRead", notificationId);
    }
}
```

## üß† Ki·∫øn Th·ª©c M·ªõi v√† K·ªπ Thu·∫≠t ƒê√°ng Ch√∫ √ù

### 1. Model-View-Service Architecture
D·ª± √°n s·ª≠ d·ª•ng ki·∫øn tr√∫c h∆∞·ªõng d·ªãch v·ª•, t√°ch bi·ªát logic nghi·ªáp v·ª• v√†o c√°c service ri√™ng bi·ªát thay v√¨ ƒë·∫∑t tr·ª±c ti·∫øp trong controller, gi√∫p code d·ªÖ b·∫£o tr√¨ v√† test h∆°n.

### 2. Real-time Web v·ªõi SignalR
SignalR ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ x√¢y d·ª±ng c√°c t√≠nh nƒÉng real-time nh∆∞ chat v√† th√¥ng b√°o, thay v√¨ ph·ª• thu·ªôc v√†o polling truy·ªÅn th·ªëng.

### 3. Repository Pattern v√† Unit of Work
S·ª≠ d·ª•ng pattern n√†y ƒë·ªÉ truy c·∫≠p d·ªØ li·ªáu, t√°ch bi·ªát logic truy c·∫≠p DB kh·ªèi business logic.

### 4. Gitea API Integration
T√≠ch h·ª£p v·ªõi Gitea API ƒë·ªÉ qu·∫£n l√Ω m√£ ngu·ªìn, t·∫°o tr·∫£i nghi·ªám Git ho√†n ch·ªânh m√† kh√¥ng c·∫ßn r·ªùi kh·ªèi n·ªÅn t·∫£ng.

### 5. Advanced Entity Framework Techniques
- Lazy loading v√† eager loading
- Shadow properties
- Query projections

### 6. Background Services trong ASP.NET Core
`NotificationBackgroundService` ch·∫°y ng·∫ßm ƒë·ªÉ x·ª≠ l√Ω th√¥ng b√°o ƒë·ªãnh k·ª≥ v√† c√°c t√°c v·ª• theo l·ªãch.

### 7. Advanced Dependency Injection
S·ª≠ d·ª•ng extension methods ƒë·ªÉ t·ªï ch·ª©c vi·ªác ƒëƒÉng k√Ω services v√†o DI container m·ªôt c√°ch c√≥ c·∫•u tr√∫c.

### 8. Markdown Rendering v√† Code Syntax Highlighting
S·ª≠ d·ª•ng Markdig ƒë·ªÉ render Markdown v√† PrismJS cho syntax highlighting ƒë·ªÉ hi·ªÉn th·ªã m√£ ngu·ªìn.

## üöÄ H∆∞·ªõng D·∫´n C√†i ƒê·∫∑t

### Y√™u C·∫ßu H·ªá Th·ªëng
- .NET 9.0 SDK
- SQL Server 2019 tr·ªü l√™n
- Visual Studio 2022 (khuy·∫øn ngh·ªã) ho·∫∑c VS Code
- Gitea server (cho t√≠nh nƒÉng qu·∫£n l√Ω m√£ ngu·ªìn)

### C√°c B∆∞·ªõc C√†i ƒê·∫∑t

1. Clone repository:
```bash
git clone https://github.com/your-username/devcommunity.git
cd devcommunity
```

2. C√†i ƒë·∫∑t dependencies:
```bash
dotnet restore
```

3. C·∫•u h√¨nh database connection string trong `appsettings.json`

4. Ch·∫°y migrations ƒë·ªÉ t·∫°o database:
```bash
dotnet ef database update
```

5. Kh·ªüi ch·∫°y ·ª©ng d·ª•ng:
```bash
dotnet run
```

Ho·∫∑c m·ªü solution trong Visual Studio v√† ch·∫°y t·ª´ IDE.

## üîú K·∫ø Ho·∫°ch Ph√°t Tri·ªÉn Ti·∫øp Theo
- C·∫£i thi·ªán h·ªá th·ªëng t√¨m ki·∫øm v·ªõi Elasticsearch
- Th√™m t√≠nh nƒÉng analytics v√† b√°o c√°o
- M·ªü r·ªông API cho ph√©p t√≠ch h·ª£p b√™n th·ª© ba
- T·ªëi ∆∞u hi·ªáu nƒÉng cho l∆∞·ª£ng d·ªØ li·ªáu l·ªõn

---

## üë®‚Äçüíª ƒê√≥ng G√≥p
DevCommunity l√† d·ª± √°n m√£ ngu·ªìn m·ªü, ch√∫ng t√¥i r·∫•t hoan ngh√™nh s·ª± ƒë√≥ng g√≥p t·ª´ c·ªông ƒë·ªìng. H√£y fork repository, t·∫°o branch m·ªõi v√† g·ª≠i pull request ƒë·ªÉ ƒë√≥ng g√≥p.

---

<p align="center">DevCommunity - N∆°i chia s·∫ª ki·∫øn th·ª©c v√† k·∫øt n·ªëi c·ªông ƒë·ªìng l·∫≠p tr√¨nh vi√™n üíª</p> 